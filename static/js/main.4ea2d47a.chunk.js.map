{"version":3,"sources":["app/api/index.js","app/components/Header/index.js","app/components/Table/index.js","app/index.js","index.js"],"names":["ROOT_URI","api","auth","data","fetch","concat","method","JSON","stringify","then","res","json","getFrameLink","code","Header","react","React","Table","state","uid","name","size","balance","key","handleChange","field","value","_this","setState","Object","defineProperty","handleClick","props","onClick","_this2","this","_this$state","className","input","id","placeholder","addonBefore","onChange","e","Number","target","es_button","APP_STATE","AUTH","GAME","UNKNOWN","App","type","frameSize","message","frameLink","handleClickStart","Api","username","secret","error","renderFrame","src","width","height","align","alertHtml","length","es_alert","frameHtml","layout","Header_Header","Content","Table_Table","mainBox","document","getElementById","Error","ReactDOM","render","react_default","a","createElement","src_app"],"mappings":"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","file":"static/js/main.4ea2d47a.chunk.js","sourcesContent":["// @flow\n\nconst ROOT_URI = \"http://testappslab.ru:8001\";\n\ntype AuthData = {\n  uid: string,\n  username: string,\n  secret: number,\n  balance: Object\n};\n\nclass Api {\n  auth = (data: AuthData): fetch => {\n    return fetch(`${ROOT_URI}/api/partners/auth`, {\n      method: \"POST\",\n      data: JSON.stringify(data)\n    }).then(res => res.json());\n  };\n\n  getFrameLink = (code: string): string =>\n    `${ROOT_URI}/?code=${code}&lang=ru&currency=usd&mirror=true`;\n}\n\nconst api: Api = new Api();\n\nexport default api;\nexport type { Api };\n","// @flow\n\nimport * as React from 'react';\n\nexport default class Header extends React.PureComponent<{}> {\n  render() {\n    return (\n      <p>\n        Test api\n      </p>\n    );\n  }\n};\n","// @flow\n\nimport * as React from \"react\";\nimport { Input, Button } from 'antd';\n\ntype Props = {\n  onClick: Function\n};\n\ntype State = {\n  uid: string,\n  name: string,\n  size: number,\n  balance: number,\n  key: number\n};\n\nexport default class Table extends React.Component<Props, State> {\n  state: State = {\n    uid: '',\n    name: '',\n    size: 0,\n    balance: 0,\n    key: 0\n  };\n  \n  handleChange = (field: string, value: string | number): void => this.setState({\n    [field]: value\n  });\n  \n  handleClick = (): void => {\n    this.props.onClick(this.state);\n  };\n\n  render() {\n    const { uid, name, key, size, balance } = this.state;\n\n    return (\n      <div className=\"form\">\n        <div className=\"row\">\n          <Input\n            id=\"size\"\n            placeholder=\"frame size\"\n            addonBefore=\"frame size\"\n            value={size}\n            onChange={(e: Object) => this.handleChange('size', Number(e.target.value))}\n          />\n        </div>\n        <div className=\"row\">\n          <Input\n            id=\"name\"\n            placeholder=\"name\"\n            addonBefore=\"name\"\n            value={name}\n            onChange={(e: Object) => this.handleChange('name', e.target.value)}\n          />\n        </div>\n        <div className=\"row\">\n          <Input\n            id=\"balance\"\n            placeholder=\"balance\"\n            addonBefore=\"balance\"\n            value={balance}\n            onChange={(e: Object) => this.handleChange('balance', Number(e.target.value))}\n          />\n        </div>\n        <div className=\"row\">\n          <Input\n            id=\"uid\"\n            placeholder=\"uid\"\n            addonBefore=\"uid\"\n            value={uid}\n            onChange={(e: Object) => this.handleChange('uid', e.target.value)}\n          />\n        </div>\n        <div className=\"row\">\n          <Input\n            id=\"key\"\n            placeholder=\"key\"\n            addonBefore=\"key\"\n            value={key}\n            onChange={(e: Object) => this.handleChange('key', Number(e.target.value))}\n          />\n        </div>\n        <Button onClick={this.handleClick}>Играть</Button>\n      </div>\n    );\n  }\n}\n","// @flow\n\nimport * as React from \"react\";\nimport { Layout, Alert } from \"antd\";\n\nimport Api from \"./api\";\n\nimport Header from \"./components/Header\";\nimport Table from \"./components/Table\";\n\nimport \"./app.css\";\n\ntype AppPropsState = {\n  type: \"auth\" | \"game\",\n  frameSize: number,\n  message: string,\n  frameLink: string\n};\n\nconst APP_STATE = {\n  AUTH: \"auth\",\n  GAME: \"game\",\n  UNKNOWN: \"unknown\"\n};\n\nclass App extends React.Component<any, AppPropsState> {\n  state: AppPropsState = {\n    type: APP_STATE.AUTH,\n    frameSize: 0,\n    message: \"\",\n    frameLink: \"\"\n  };\n\n  handleClickStart = (data: {\n    uid: string,\n    name: string,\n    size: number,\n    balance: number,\n    key: number\n  }): void => {\n    Api.auth({\n      uid: data.uid,\n      username: data.name,\n      secret: data.key,\n      balance: { balance: data.balance }\n    }).then((res: any) => {\n      if (res.error) {\n        this.setState({\n          message: res.message\n        });\n      }\n\n      if (res.code) {\n        this.setState({\n          frameSize: data.size,\n          frameLink: Api.getFrameLink(res.code)\n        });\n      }\n    });\n  };\n\n  renderFrame = (): React.Element<any> => (\n    <iframe\n      src={this.state.frameLink}\n      width={this.state.frameSize}\n      height={this.state.frameSize / 2}\n      align=\"left\"\n    />\n  );\n\n  render() {\n    const { message, frameLink } = this.state;\n    const alertHtml = message.length ? (\n      <Alert type=\"error\" message={message} />\n    ) : null;\n\n    const frameHtml = frameLink.length ? this.renderFrame() : null;\n\n    return (\n      <div className=\"app\">\n        <Layout.Header>\n          <Header />\n        </Layout.Header>\n        <Layout.Content>\n          <div className=\"alert\">{alertHtml}</div>\n          <Table onClick={this.handleClickStart} />\n          {frameHtml}\n        </Layout.Content>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","// @flow\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './app';\n\nimport './index.css';\n\nconst mainBox: ?HTMLElement = document.getElementById('root');\n\nif (mainBox) {\n  ReactDOM.render(<App />, mainBox);\n} else {\n    throw new Error('root element hasn\\'t created');\n}\n"],"sourceRoot":""}